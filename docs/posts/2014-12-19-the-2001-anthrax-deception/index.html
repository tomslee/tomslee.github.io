<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.56">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Tom Slee">
<meta name="dcterms.date" content="2014-12-19">

<title>The 2001 Anthrax Deception – Tom Slee</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../logo.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
<meta name="twitter:title" content="The 2001 Anthrax Deception – Tom Slee">
<meta name="twitter:description" content="Personal web site">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Tom Slee</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../essays.html"> 
<span class="menu-text">Essays</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../inprogress.html"> 
<span class="menu-text">Uncertainties</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://tomslee.github.io/ridehail/lab/"> 
<span class="menu-text">Ridehail Lab</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../blog.html"> 
<span class="menu-text">Whimsley (blog archive)</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/tomslee"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/whimsley"> <i class="bi bi-twitter" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">The 2001 Anthrax Deception</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">blog archive</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Tom Slee </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">December 19, 2014</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
        
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>This page has been migrated from an earlier version of this site. Links and images may be broken.</p>
</div>
</div>
<p>I may be biased, but I believe my friend Graeme MacQueen has written a brave and important book in his newly-published “<a href="http://www.claritypress.com/MacQueen.html">The 2001 Anthrax Deception</a>”, which he subtitles “The case for a domestic conspiracy”. It’s a book that takes on new importance in the light of the CIA torture report.</p>
<p>If you’re like me, you won’t have thought about the anthrax attacks in some time. Remember: these were the letters containing spores of anthrax sent through the US mail to media companies and to selected politicians in the immediate aftermath of the 9/11 attacks; letters that killed five people. During October 2001 there was a widespread belief that the letters were a follow-up to the 9/11 planes, carried out by al-Qaeda with the help of Iraq, which was supposedly one of the few actors with the expertise and capacity to produce this biological weapon of mass destruction. That theory was disproved in late October and the FBI began hunting for a domestic “lone wolf”, initially pursuing one Steven Hatfill and then, when this avenue also proved to be a dead end, going silent. Six years later the FBI and the Department of Justice announced that they had a new suspect in Dr.&nbsp;Bruce Ivins, who worked on anthrax vaccines for the US army. Ivins died – said to be suicide – shortly before he was to be charged. In 2010 the Department of Justice closed the case, releasing a report that laid the blame at Ivins’s door.</p>
<p>MacQueen’s book (I think of it as “Graeme’s book” of course, but for the sake of style I’ll call him “MacQueen” here). As I was saying, MacQueen’s book is brave because any attempt to question official stories of events surrounding 9/11 get labelled as “conspiracy theories” which are, after all, taboo in polite society. Questioning of the official story of the anthrax attacks has been made to seem tantamount to a belief in the Illuminati and a conviction that the moon landings were faked, but MacQueen refuses to back away from the word. It’s to his credit that he puts the word “conspiracy” right there on the cover. And after all, as he says, it is nearly universally believed that the 9/11 attacks were a conspiracy.</p>
<p>It should be uncontroversial to question the “official story” of the anthrax attacks. There was no trial, no opportunity for a defence by the man deemed guilty; the official story has not been tempered by the heat of public interrogation and debate. Released years after the events, the appetite for challenging the report has never been a strong one. In short, as official stories go, it’s not well established; its status is more like an arrest than a conviction.</p>
<p>And people do conspire, MacQueen reminds us. To use the word need not imply a belief in all-powerful yet shadowy cabals, nor commit us to a conspiratorial view of history; the spectrum of possibilities is broad. Maybe it helps to think of a more distant case. The death of the Princes in the Tower during the Wars of the Roses remains something of a mystery, but most historians lay the blame at the feet of Richard III. Yet to say that “Richard did it” is just the beginning. There’s almost no chance that Richard actually carried out the execution with his own hands. So did he order it directly? Or did he utter an equivalent of the earlier Henry II’s “will no one rid me of this turbulent priest?” and let his councillors take their cue from his frustration? Or did the initiative come from elsewhere in his court, as someone lower down the hierarchy took history into their own hands? All of these are possible. There is a supply-and-demand aspect to political entrepreneurship and to responsibility for heinous acts. Creating the conditions that encourage and reward criminal actions is part of the tangle of blame.</p>
<p>We know that sending anthrax powder through the mail is not so far from confirmed practices of US military and intelligence agencies: Oliver North arranged for arms to be sold to Iran in order to pursue war in Nicaragua through contra proxies; the Gulf of Tonkin incident demonstrated the willingness of the US to deceive the public in order to justify a war.&nbsp;The use of agent provocateurs by official agencies is well established: many of the terrorist attacks supposedly prevented by anti-terrorist agencies were facilitated and encouraged by operatives of those same agencies as they try to establish their radical credentials in the communities they are infiltrating. Here in Canada, Mubin Shaikh was actively involved in setting up training camps that were then used to justify the arrest of the youths who attended them.</p>
<p>All of which is simply to say that there is a case to be made here, and one that should be well within the norms of acceptable debate.</p>
<p>One of the reasons I came into the book in a sceptical frame of mind was that there are no planning documents, no insiders giving compelling accounts of how the planning was done and where. <em>Someone</em>, I thought, would have come out and said <em>something</em>; or someone would have found and leaked some key document. But the report on CIA torture puts those doubts to one side: it shows that illegal actions can be carried on with the involvement of many inside people, that even though there would be tremendous demand for such material from the press no one leaked anything over the years since 2002, and that in the absence of the inquiry we would still not know (as a society) that these events had happened and that the CIA had organized them. So yes, secrets can be held for years.</p>
<p>In all this waffle I realize I’ve not actually said much about the book itself, so maybe I should summarize it at least. Here goes.</p>
<p>MacQueen sets out his aims&nbsp;right at the beginning of the book. He’s out to show that the perpetrator of the anthrax attacks&nbsp;was not a “lone wolf”, that they&nbsp;were carried out by deep insiders in the US executive branch, that there were links to the 9/11 Hijackers, that the goals of the attackers were to redefine the enemy of the west to the Global War on Terror and to weaken the rule of law internationally and within the US: goals that were successfully achieved. He convinces me of the first and of the final two. I’m not quite ready to follow him for sure with the second and third, but he makes a compelling case for both and I am convinced by him that insiders within the US executive branch have responsibility for these attacks, whether or not there was an explicit order to carry them out.</p>
<p>The focus of the book, as the subtitle says, is to make the case <em>for</em> a domestic conspiracy, and MacQueen starts with motive. In September and October 2001 there was a concerted effort to cast the events of 9/11 as an act of war rather than just terrorism. Casting it as war was essential to passing the Patriot Act, to giving the President extraordinary powers, and to setting up military tribunals to try those seized. The case for war was made much stronger by the anthrax attacks, which clearly required capabilities the reach of non-state actors, and which were presented (during the crucial weeks of debate during October 2001) as clear evidence of conspiracy between al-Qaeda and Iraq. If Iraq was involved, then it’s an attack by a nation state, hence war.</p>
<p>In the lead-up to passing the Patriot Act on October 11, 2001, the Bush administration adopted a “strategy of tension”, building up the threat of an al-Qaeda/Iraq axis. Leahy and Daschle played leading roles in delaying the Patriot Act so that it did not pass by an administration deadline of October 5th and then, between October 6 and 9, letters were sent to both of them containing anthrax. Sure enough, on October 11 the act was passed. When it was signed into law on October 26, George Bush specifically invoked the anthrax attacks as a justification for curtailment of civil rights, in a chain of events that led straight to the now-exposed NSA surveillance practices. There is no doubt that the anthrax attacks gave the Bush administration exactly what it needed in order to achieve its legislative goals.</p>
<p>The central chapter of the book is an investigation of the four possibilities for the attacks: (domestic/foreign) (individual/group). The early focus was, as I’ve already said, on a “foreign group” and it’s important to remember just what happened at that time. On the basis of flimsy and ultimately false information, conjecture, and circumstantial evidence (at best), there was a major part of the US (and international) political and journalistic establishments who proclaimed, with sufficient certainty to invade countries and kill large numbers of people, that the verdict was in and the attacks were the responsibility of a “double perpetrator”: al-Qaeda and Iraq. It is at the very least inconsistent to dismiss those, like MacQueen, who suggest that a domestic group perpetrator was responsible when those who propagated and used the “double perpetrator” hypothesis continue to enjoy prestige and respect. The “conspiracy theorists” have a right to be taken seriously in this debate.</p>
<p>The double-perpetrator hypothesis gave way in the face of the revelation that the anthrax was weaponized and featured an aerosol additive that indicated it came from US military laboratories. A foreign individual was clearly out of the question, so that leaves two options. All efforts were devoted to tracking a domestic individual, first Steven Hatfill and then Bruce Ivins, efforts that concluded with the publishing of the Department of Justice report in 2010 and the closing of the case.</p>
<p>The main focus of the book is not to attack the case against Ivins, but MacQueen does highlight two events: the publishing of the National Academy of Science report in 2011 that said the physical evidence tying Ivins to the mailed spores was inconclusive, and researchers who published scientific papers showing that the spores could not have been prepared by an individual, and probably came from a lab other than the one where Ivins worked.</p>
<p>I found this central chapter very strong. The case against Ivins is far from compelling, the absence of a trial is remarkable, and there has simply been no public attempt to assess guilt or innocence. MacQueen makes a very strong case that there is no obviously true official story, and that attempts to establish alternative theories are valid and should be taken seriously.</p>
<p>I was less convinced by the following chapter, which is&nbsp;about advance knowledge of the attacks. Certainly there was much discussion of the possibility of anthrax attacks, and of dirty nuclear bombs, in the media during September 2001, after 9/11 and before the actual anthrax attacks became public in October, but I’m not convinced that such discussion necessarily derived&nbsp;–&nbsp;as MacQueen suggests it does&nbsp;–from the perpetrators of the attacks or that it showed foreknowledge or an attempt to prepare the ground for when the attacks actually happened.</p>
<p>That said, there is, again, a spectrum of possibilities. MacQueen’s claim that top officials used the chatter and amplified it at politically useful times and that the chatter was part of a conspiracy to justify war is convincing, as is his claim that the double perpetrator hypothesis was “false, known to be false, and flowed from repeated acts of deception by the US Government”.</p>
<p>If anything does make me consider the possibility of foreknowledge it’s MacQueen’s account of an exercise called Dark Winter, carried out at Andrews Airforce base on June 22-23 2001. The exercise simulated a biological warfare attack by terrorists in which anonymous letters containing smallpox virus are sent to media outlets. The simulation evolved in striking parallel to the actual events of September and October 2001. The participants in Dark Winter included Judith Miller (New York Times journalist who played an important role in promoting war on Iraq), James Woolsey (director of the CIA under the Clinton administration) and Jerome Hauer (a member of the neoconservative Committee on the Present Danger and also the director of the Office of Emergency Management of New York City until early 2000).</p>
<p>What do these parallels tell us? They don’t prove that the team organizing the Dark Winter exercise carried out the anthrax attacks (and MacQueen doesn’t claim this), but they do tell us that there was a well-established script which&nbsp;gives the attacks meaning and purpose from a conservative point of view. They show that the people involved in Dark Winter, together with others in the Bush administration and in the conservative media, fostered a climate in which the anthrax attacks played a politically useful role, creating a context which encouraged a “false attack” by anyone who would want to see an attack on Iraq happen. Such an attack took place, and played the part required of it. Whether it was actually executed by a lone wolf or by a group is perhaps not the most important question.</p>
<p>MacQueen is interested in the anthrax attacks for their own sake, but he is also interested in 9/11, and he sees connections between the two. Robert Stevens, the first casualty of the anthrax attacks, was an employee of Mike Irish at Boca Raton newspaper <em>The Sun</em> and a friend of his wife, real-estate agent Gloria Irish. Gloria Irish found houses both for Stevens and, in the summer of 2001, for two of the 9/11 hijackers (Marwan al-Shehhi and Hama al-Ghamdi). The official explanation for this is that it’s a coincidence. Beyond this, Hijacker Mohamed Atta made attempts to buy crop-dusting planes which made sense only for an anthrax attack (which al-Qaeda had, we now know, no capability to execute). It does seem likely that there was an attempt to tie the anthrax attacks to the 9/11 attacks, and so to present al-Qaeda as likely anthrax attackers&nbsp;– but by whom? Bruce Ivins could not have known (MacQueen shows) of the connections between Stevens and the Hijackers.</p>
<p>The Bush administration undertook a wide range of deceptive actions – lying, making false implications and more – to present anthrax, al-Qaeda and Iraq as a powerful and threatening combination. These actions culminated in Colin Powell’s UN Security Council presentation at which he held up a vial of simulated anthrax. So just how far did they go? How much did they push, cajole, and encourage their organizations&nbsp;to produce evidence to back up the stands they were taking? And if they were putting a lot of pressure on their organizations to provide the proof of al-Qaeda/Iraq mendacity that they knew was out there, would it be surprising if a group somewhere undertook to provide the nudge that was needed, or took the pragmatic shortcut of just doing it themselves? Because surely, you can imagine them thinking, even if <em>this</em> attack was fake, it would be done with the best of motives, to draw attention to a greater danger that they knew was there in Baghdad. Will no one rid me of this turbulent priest?</p>
<p>The book gets, for me, at least 80% of the way to the author’s goals. He reminds us of the lengths to which powerful organizations go to achieve their aims. He reminds us that such organizations are not all-powerful, but make mistakes. He shows us that the constellations were aligned by the Bush administration in such a way that the anthrax attacks (by domestic actors supportive of the Bush administration goals) would be an understandable action. He shows us that there is a plausible connection between the perpetrators of the anthrax attacks and the 9/11 Hijackers. If he doesn’t pull me the last mile to being convinced that the attacks were executed by people deep within the US executive branch I am a lot more open to the possibility than when I started. It’s a brave and necessary book and it&nbsp;matters&nbsp;that dissident voices such as his are demanding that questions continue to be asked about this important recent history.</p>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>2023 – 2024, Tom Slee</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>